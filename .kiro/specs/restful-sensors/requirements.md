# 要件ドキュメント

## はじめに

このドキュメントでは、現在 command_line センサーとして実装されている REGZA テレビの3つのセンサーを RESTful センサーに変更するための要件を定義します。RESTful センサーを使用することで、より効率的なデータ取得と管理が可能になります。

## 要件

### 要件 1

**ユーザーストーリー:** システム管理者として、REGZA テレビの音量ミュート状態を RESTful センサーで取得したい。これにより、より効率的なデータ取得と管理が可能になります。

#### 受け入れ基準

1. WHEN Home Assistant が起動する THEN システムは RESTful センサーを使用して REGZA の音量ミュート状態を取得する
2. IF ミュート状態が変更された THEN システムは更新された状態を反映する
3. WHEN センサーがデータを取得する THEN システムは既存の command_line センサーと同じ形式でデータを提供する
4. WHEN センサーが設定される THEN システムは認証情報を安全に管理する

### 要件 2

**ユーザーストーリー:** システム管理者として、REGZA テレビの現在のチャンネル情報を RESTful センサーで取得したい。これにより、より効率的なデータ取得と管理が可能になります。

#### 受け入れ基準

1. WHEN Home Assistant が起動する THEN システムは RESTful センサーを使用して REGZA の現在のチャンネル情報を取得する
2. IF チャンネルが変更された THEN システムは更新されたチャンネル情報を反映する
3. WHEN センサーがデータを取得する THEN システムは既存の command_line センサーと同じ形式でデータを提供する
4. WHEN センサーが設定される THEN システムは認証情報を安全に管理する

### 要件 3

**ユーザーストーリー:** システム管理者として、REGZA テレビのコンテンツタイプ情報を RESTful センサーで取得したい。これにより、より効率的なデータ取得と管理が可能になります。

#### 受け入れ基準

1. WHEN Home Assistant が起動する THEN システムは RESTful センサーを使用して REGZA のコンテンツタイプ情報を取得する
2. IF コンテンツタイプが変更された THEN システムは更新されたコンテンツタイプ情報を反映する
3. WHEN センサーがデータを取得する THEN システムは既存の command_line センサーと同じスキャン間隔（5秒）でデータを更新する
4. WHEN センサーがデータを取得する THEN システムは既存の command_line センサーと同じ形式でデータを提供する
5. WHEN センサーが設定される THEN システムは認証情報を安全に管理する

### 要件 4

**ユーザーストーリー:** システム管理者として、既存の command_line センサーから RESTful センサーへの移行をスムーズに行いたい。これにより、システムの中断を最小限に抑えることができます。

#### 受け入れ基準

1. WHEN 新しい RESTful センサーが実装される THEN システムは既存のセンサー ID と名前を維持する
2. WHEN 新しい RESTful センサーが実装される THEN システムは既存の自動化やスクリプトが中断なく動作する
3. IF 移行中に問題が発生した場合 THEN システムは元の command_line センサー構成に戻すことができる
4. RESTful センサーは roles/homeasssitant/files/sensors.yaml の Living Room コメントの下に記述する

---
- hosts: centos
  become: yes
  remote_user: centos
  vars:
    jdk_filename: jdk-8u112-linux-x64.rpm
    sct_filename: aws-schema-conversion-tool-1.0.501-1.x86_64.rpm
    sqldeveloper_filename: sqldeveloper-4.1.5.21.78-1.noarch.rpm
  tasks:
      # Download the files before the following task
      # from <http://www.oracle.com/technetwork/topics/linuxx86-64soft-092277.html>
    - name: copy jdk.rpm
      copy:
        src: ~/Downloads/{{jdk_filename}}
        dest: /usr/local/src
      tags: [jdk, package]

    - name: install jdk
      yum:
        name: /usr/local/src/{{jdk_filename}}
        state: installed
      tags: [jdk, package]

    - name: erase openjdk
      yum:
        name: "{{item}}"
        state: absent
      with_items:
        - java-1.8.0-openjdk-headless
        - java-1.7.0-openjdk-headless
        - java-1.8.0-openjdk
      tags: [jdk, package]

    - name: unarchive aws-schema-conversion-tool
      unarchive:
        src: https://s3.amazonaws.com/publicsctdownload/Fedora/aws-schema-conversion-tool-1.0.latest.zip
        dest: /usr/local/src
        remote_src: yes
      tags: [package, sct]

    - name: install aws-schema-conversion-tool
      yum:
        name: /usr/local/src/{{sct_filename}}
        state: installed
      tags: [package, sct]

      # Download the files before the following task
      # from <http://www.oracle.com/technetwork/developer-tools/sql-developer/downloads/>
    - name: copy sqldeveloper.rpm
      copy:
        src: ~/Downloads/{{sqldeveloper_filename}}
        dest: /usr/local/src
      tags: [package, sqldeveloper]

    - name: install sqldeveloper
      yum:
        name: /usr/local/src/{{sqldeveloper_filename}}
        state: installed
      tags: [package, sqldeveloper]

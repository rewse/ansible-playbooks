---
- hosts: centos
  become: yes
  remote_user: centos
  tasks:
    - name: install centos-release-scl
      yum:
        name: centos-release-scl
        state: installed
      tags: [package]

    - name: add priority into /etc/yum.repos.d/CentOS-SCLo-scl.repo
      ini_file:
        dest: /etc/yum.repos.d/CentOS-SCLo-scl.repo
        section: centos-sclo-sclo
        option: priority
        value: 30
        no_extra_spaces: True
      tags: [package]

    - name: add priority into /etc/yum.repos.d/CentOS-SCLo-scl-rh.repo
      ini_file:
        dest: /etc/yum.repos.d/CentOS-SCLo-scl-rh.repo
        section: centos-sclo-rh
        option: priority
        value: 30
        no_extra_spaces: True
      tags: [package]

    - name: install postgresql-9.5 client
      yum:
        name: "{{item}}"
        state: installed
      with_items:
        - postgresql-jdbc
        - rh-postgresql95-postgresql
      tags: [client, postgresql]

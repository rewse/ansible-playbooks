# Do not use value_template because it causes a warning message every time
- platform: command_line
  name: REGZA Channel
  command: curl --digest --user '[% regza.username %]:[% regza.password %]' http://regza.rewse.jp/v2/remote/play/status | jq -r .epg_info_current.channel_name
- platform: dnsip
  name: DNS hass.rewse.jp
  hostname: hass.rewse.jp
  resolver: 192.168.0.1
- platform: mqtt
  unique_id: sensor.mqtt.enecoq_fee_low
  name: enecoQ Fee Low
  state_topic: enecoq/fee
  value_template: "{{ value_json.low }}"
  unit_of_measurement: JPY/h
  availability:
    - topic: enecoq/fee/state
  icon: mdi:transmission-tower
- platform: mqtt
  unique_id: sensor.mqtt.enecoq_fee_mid
  name: enecoQ Fee Mid
  state_topic: enecoq/fee
  value_template: "{{ value_json.mid }}"
  unit_of_measurement: JPY/h
  availability:
    - topic: enecoq/fee/state
  icon: mdi:transmission-tower
- platform: mqtt
  unique_id: sensor.mqtt.enecoq_fee_high
  name: enecoQ Fee High
  state_topic: enecoq/fee
  value_template: "{{ value_json.high }}"
  unit_of_measurement: JPY/h
  availability:
    - topic: enecoq/fee/state
  icon: mdi:transmission-tower
- platform: mqtt
  unique_id: sensor.mqtt.enecoq_fee_total
  name: enecoQ Fee Total
  state_topic: enecoq/fee
  value_template: "{{ value_json.total }}"
  unit_of_measurement: JPY/h
  availability:
    - topic: enecoq/fee/state
  icon: mdi:transmission-tower
# Do no use command_line because it doesn’t work
- platform: mqtt
  unique_id: sensor.mqtt.wifi.xray_liv.band2.ch
  name: xray-liv 2.4GHz Channel
  state_topic: wifi/9CC9EBDA1D01
  value_template: "{{ value_json.ch }}"
  unit_of_measurement: ch
  availability:
    - topic: wifi/9CC9EBDA1D01/status
  icon: mdi:wifi
# Do no use command_line because it doesn’t work
- platform: mqtt
  unique_id: sensor.mqtt.wifi.xray_liv.band5.ch
  name: xray-liv 5GHz Channel
  state_topic: wifi/9CC9EBDA1D11
  value_template: "{{ value_json.ch }}"
  unit_of_measurement: ch
  availability:
    - topic: wifi/9CC9EBDA1D11/status
  icon: mdi:wifi-star
# Do no use command_line because it doesn’t work
- platform: mqtt
  unique_id: sensor.mqtt.wifi.xray_sto.band2.ch
  name: xray-sto 2.4GHz Channel
  state_topic: wifi/44A56E5B8381
  value_template: "{{ value_json.ch }}"
  unit_of_measurement: ch
  availability:
    - topic: wifi/44A56E5B8381/status
  icon: mdi:wifi
# Do no use command_line because it doesn’t work
- platform: mqtt
  unique_id: sensor.mqtt.wifi.xray_sto.band5.ch
  name: xray-sto 5GHz Channel
  state_topic: wifi/44A56E5B8391
  value_template: "{{ value_json.ch }}"
  unit_of_measurement: ch
  availability:
    - topic: wifi/44A56E5B8391/status
  icon: mdi:wifi-star
- platform: rest
  name: Bedroom Curtains Position
  resource: https://api.switch-bot.com/v1.0/devices/EAED0CCBC1A2/status
  headers:
    Authorization: !secret switchbot_token
    Content-Type: 'application/json'
  value_template: '{{ value_json.body.slidePosition }}'
  json_attributes_path: "$.body"
  json_attributes:
    - deviceId
    - deviceType
    - hubDeviceId
    - calibrate
    - group
    - moving
    - slidePosition
  scan_interval: 120
- platform: rest
  name: Living Room SwitchBot Meter Temperature
  resource: https://api.switch-bot.com/v1.0/devices/F5DAB9477E91/status
  headers:
    Authorization: !secret switchbot_token
    Content-Type: 'application/json'
  value_template: '{{ value_json.body.temperature }}'
  json_attributes_path: "$.body"
  json_attributes:
    - deviceId
    - deviceType
    - hubDeviceId
    - humidity
    - temperature
  device_class: temperature
  unit_of_measurement: °C
  scan_interval: 36000
- platform: rest
  name: Bedroom SwitchBot Meter Temperature
  resource: https://api.switch-bot.com/v1.0/devices/F980AECF8644/status
  headers:
    Authorization: !secret switchbot_token
    Content-Type: 'application/json'
  value_template: '{{ value_json.body.temperature }}'
  json_attributes_path: "$.body"
  json_attributes:
    - deviceId
    - deviceType
    - hubDeviceId
    - humidity
    - temperature
  device_class: temperature
  unit_of_measurement: °C
  scan_interval: 36000
- platform: rest
  name: Balcony SwitchBot Meter Temperature
  resource: https://api.switch-bot.com/v1.0/devices/EDE4EAA09EA3/status
  headers:
    Authorization: !secret switchbot_token
    Content-Type: 'application/json'
  value_template: '{{ value_json.body.temperature }}'
  json_attributes_path: "$.body"
  json_attributes:
    - deviceId
    - deviceType
    - hubDeviceId
    - humidity
    - temperature
  device_class: temperature
  unit_of_measurement: °C
  scan_interval: 36000
- platform: season
- platform: seventeentrack
  username: !secret seventeentrack_username
  password: !secret seventeentrack_password
- platform: snmp
  name: "romeo Uptime"
  host: romeo.rewse.jp
  baseoid: 1.3.6.1.2.1.1.3.0
  version: 2c
  unit_of_measurement: "days"
  value_template: "{{ ((value | int) / 8640000) | int }}"
- platform: snmp
  name: "romeo LAN1 Status"
  host: romeo.rewse.jp
  baseoid: 1.3.6.1.2.1.2.2.1.8.1
  version: 2c
- platform: snmp
  name: "romeo LAN2 Status"
  host: romeo.rewse.jp
  baseoid: 1.3.6.1.2.1.2.2.1.8.2
  version: 2c
- platform: snmp
  name: "romeo LAN1 Octets In"
  host: romeo.rewse.jp
  baseoid: 1.3.6.1.2.1.2.2.1.10.1
  version: 2c
  unit_of_measurement: MB
  value_template: "{{ ((value | int) / 1048576) | int }}"
- platform: snmp
  name: "romeo LAN2 Octets In"
  host: romeo.rewse.jp
  baseoid: 1.3.6.1.2.1.2.2.1.10.2
  version: 2c
  unit_of_measurement: MB
  value_template: "{{ ((value | int) / 1048576) | int }}"
- platform: snmp
  name: "romeo LAN1 Discard In"
  host: romeo.rewse.jp
  baseoid: 1.3.6.1.2.1.2.2.1.13.1
  version: 2c
  unit_of_measurement: B
- platform: snmp
  name: "romeo LAN2 Discard In"
  host: romeo.rewse.jp
  baseoid: 1.3.6.1.2.1.2.2.1.13.2
  version: 2c
  unit_of_measurement: B
- platform: snmp
  name: "romeo LAN1 Errors In"
  host: romeo.rewse.jp
  baseoid: 1.3.6.1.2.1.2.2.1.14.1
  version: 2c
  unit_of_measurement: B
- platform: snmp
  name: "romeo LAN2 Errors In"
  host: romeo.rewse.jp
  baseoid: 1.3.6.1.2.1.2.2.1.14.2
  version: 2c
  unit_of_measurement: B
- platform: snmp
  name: "romeo LAN1 Octets Out"
  host: romeo.rewse.jp
  baseoid: 1.3.6.1.2.1.2.2.1.16.1
  version: 2c
  unit_of_measurement: MB
  value_template: "{{ ((value | int) / 1048576) | int }}"
- platform: snmp
  name: "romeo LAN2 Octets Out"
  host: romeo.rewse.jp
  baseoid: 1.3.6.1.2.1.2.2.1.16.2
  version: 2c
  unit_of_measurement: MB
  value_template: "{{ ((value | int) / 1048576) | int }}"
- platform: snmp
  name: "romeo LAN1 Discard Out"
  host: romeo.rewse.jp
  baseoid: 1.3.6.1.2.1.2.2.1.19.1
  version: 2c
  unit_of_measurement: B
- platform: snmp
  name: "romeo LAN2 Discard Out"
  host: romeo.rewse.jp
  baseoid: 1.3.6.1.2.1.2.2.1.19.2
  version: 2c
  unit_of_measurement: B
- platform: snmp
  name: "romeo LAN1 Errors Out"
  host: romeo.rewse.jp
  baseoid: 1.3.6.1.2.1.2.2.1.20.1
  version: 2c
  unit_of_measurement: B
- platform: snmp
  name: "romeo LAN2 Errors Out"
  host: romeo.rewse.jp
  baseoid: 1.3.6.1.2.1.2.2.1.20.2
  version: 2c
  unit_of_measurement: B
- platform: snmp
  name: "romeo CPU Load Average (5 sec)"
  host: romeo.rewse.jp
  baseoid: 1.3.6.1.4.1.1182.2.1.5.0
  version: 2c
  unit_of_measurement: load
- platform: snmp
  name: "romeo CPU Load Average (1 min)"
  host: romeo.rewse.jp
  baseoid: 1.3.6.1.4.1.1182.2.1.6.0
  version: 2c
  unit_of_measurement: load
- platform: snmp
  name: "romeo CPU Load Average (5 min)"
  host: romeo.rewse.jp
  baseoid: 1.3.6.1.4.1.1182.2.1.7.0
  version: 2c
  unit_of_measurement: load
- platform: snmp
  name: "romeo Memory Usage"
  host: romeo.rewse.jp
  baseoid: 1.3.6.1.4.1.1182.2.1.4.0
  version: 2c
  unit_of_measurement: "%"
- platform: snmp
  name: "romeo Temperature"
  host: romeo.rewse.jp
  baseoid: 1.3.6.1.4.1.1182.2.1.15.0
  version: 2c
  unit_of_measurement: °C
- platform: template
  sensors:
    living_room_wbgt:
      unique_id: sensor.template.living_room_wbgt
      friendly_name: Living Room WBGT
      unit_of_measurement: °C
      value_template: "{{ ((states('sensor.living_room_temperature') | float - 30.5) * 0.90739 + (states('sensor.living_room_humidity') | float - 60.0) * 0.14775 + (states('sensor.living_room_temperature') | float - 30.5) * (states('sensor.living_room_humidity') | float - 60.0) * 0.003655 + 27.77) | round(2) }}"
      icon_template: mdi:thermometer-lines
    bedroom_wbgt:
      unique_id: sensor.template.bedroom_wbgt
      friendly_name: Bedroom WBGT
      unit_of_measurement: °C
      value_template: "{{ ((states('sensor.bedroom_temperature') | float - 30.5) * 0.90739 + (states('sensor.bedroom_humidity') | float - 60.0) * 0.14775 + (states('sensor.bedroom_temperature') | float - 30.5) * (states('sensor.bedroom_humidity') | float - 60.0) * 0.003655 + 27.77) | round(2) }}"
      icon_template: mdi:thermometer-lines
    balcony_wbgt:
      unique_id: sensor.template.balcony_wbgt
      friendly_name: Balcony WBGT
      unit_of_measurement: °C
      value_template: "{{ ((states('sensor.balcony_temperature') | float - 30.5) * 0.90739 + (states('sensor.balcony_humidity') | float - 60.0) * 0.14775 + (states('sensor.balcony_temperature') | float - 30.5) * (states('sensor.balcony_humidity') | float - 60.0) * 0.003655 + 27.77) | round(2) }}"
      icon_template: mdi:thermometer-lines
    living_room_temperature_difference:
      unique_id: sensor.living_room_temperature_difference
      friendly_name: Living Room Temperature Difference
      value_template: "{{ (states('sensor.living_room_temperature') | float - states('sensor.living_room_switchbot_meter_temperature') | float) | round(2) | abs }}"
      unit_of_measurement: °C
      icon_template: mdi:thermometer-alert
    bedroom_temperature_difference:
      unique_id: sensor.bedroom_temperature_difference
      friendly_name: Bedroom Temperature Difference
      value_template: "{{ (states('sensor.bedroom_temperature') | float - states('sensor.bedroom_switchbot_meter_temperature') | float) | round(2) | abs }}"
      unit_of_measurement: °C
      icon_template: mdi:thermometer-alert
    balcony_temperature_difference:
      unique_id: sensor.balcony_temperature_difference
      friendly_name: Balcony Temperature Difference
      value_template: "{{ (states('sensor.balcony_temperature') | float - states('sensor.balcony_switchbot_meter_temperature') | float) | round(2) | abs }}"
      unit_of_measurement: °C
      icon_template: mdi:thermometer-alert
    living_room_humidity_difference:
      unique_id: sensor.living_room_humidity_difference
      friendly_name: Living Room Humidity Difference
      value_template: "{{ (states('sensor.living_room_humidity') | float - state_attr('sensor.living_room_switchbot_meter_temperature', 'humidity') | float) | round(2) | abs }}"
      unit_of_measurement: pt
      icon_template: mdi:water-percent-alert
    bedroom_humidity_difference:
      unique_id: sensor.bedroom_humidity_difference
      friendly_name: Bedroom Humidity Difference
      value_template: "{{ (states('sensor.bedroom_humidity') | float - state_attr('sensor.bedroom_switchbot_meter_temperature', 'humidity') | float) | round(2) | abs }}"
      unit_of_measurement: pt
      icon_template: mdi:water-percent-alert
    balcony_humidity_difference:
      unique_id: sensor.balcony_humidity_difference
      friendly_name: Balcony Humidity Difference
      value_template: "{{ (states('sensor.balcony_humidity') | float - state_attr('sensor.balcony_switchbot_meter_temperature', 'humidity') | float) | round(2) | abs }}"
      unit_of_measurement: pt
      icon_template: mdi:water-percent-alert

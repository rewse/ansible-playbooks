- id: automation.select_dads_room_light_mode
  alias: Select Dad’s Room Light Mode
  triggers:
    - trigger: state
      entity_id: input_select.dads_room_light_remote_mode
    - trigger: state
      entity_id: input_select.time_mode
    - trigger: homeassistant
      event: start
  actions:
    - choose:
        - conditions:
            - condition: state
              entity_id: input_select.dads_room_light_remote_mode
              state: Turned on
            - condition: state
              entity_id: input_select.time_mode
              state: Daytime
          sequence:
            - action: input_select.select_option
              target: 
                entity_id: input_select.dads_room_light_mode
              data:
                option: Turned on Daytime
        - conditions:
            - condition: state
              entity_id: input_select.dads_room_light_remote_mode
              state: Turned on
            - condition: state
              entity_id: input_select.time_mode
              state: Twilight
          sequence:
            - action: input_select.select_option
              target: 
                entity_id: input_select.dads_room_light_mode
              data:
                option: Turned on Twilight
        - conditions:
            - condition: state
              entity_id: input_select.dads_room_light_remote_mode
              state: Turned on
            - condition: state
              entity_id: input_select.time_mode
              state: Night
          sequence:
            - action: input_select.select_option
              target: 
                entity_id: input_select.dads_room_light_mode
              data:
                option: Turned on Night
        - conditions:
            - condition: state
              entity_id: input_select.dads_room_light_remote_mode
              state: Turned on
            - condition: state
              entity_id: input_select.time_mode
              state: Late Night
          sequence:
            - action: input_select.select_option
              target: 
                entity_id: input_select.dads_room_light_mode
              data:
                option: Turned on Late Night
        - conditions:
            - condition: state
              entity_id: input_select.dads_room_light_remote_mode
              state: Turned on
            - condition: state
              entity_id: input_select.time_mode
              state: Midnight
          sequence:
            - action: input_select.select_option
              target: 
                entity_id: input_select.dads_room_light_mode
              data:
                option: Turned on Midnight
        - conditions:
            - or:
                - condition: state
                  entity_id: input_select.dads_room_light_remote_mode
                  state: Turned off
                - and:
                    - condition: state
                      entity_id: input_select.dads_room_light_remote_mode
                      state: Idle
                    - condition: state
                      entity_id: input_select.dads_room_presence_mode
                      state: Absent
          sequence:
            - action: input_select.select_option
              target: 
                entity_id: input_select.dads_room_light_mode
              data:
                option: Dark
        - conditions:
            - condition: state
              entity_id: input_select.time_mode
              state: Daytime
            - condition: state
              entity_id: light.dads_room_pendant_light
              state: "on"
          sequence:
            - action: input_select.select_option
              target: 
                entity_id: input_select.dads_room_light_mode
              data:
                option: Daytime
        - conditions:
            - condition: state
              entity_id: input_select.time_mode
              state: Twilight
            - condition: state
              entity_id: light.dads_room_pendant_light
              state: "on"
          sequence:
            - action: input_select.select_option
              target: 
                entity_id: input_select.dads_room_light_mode
              data:
                option: Twilight
        - conditions:
            - condition: state
              entity_id: input_select.time_mode
              state: Night
            - condition: state
              entity_id: light.dads_room_pendant_light
              state: "on"
          sequence:
            - action: input_select.select_option
              target: 
                entity_id: input_select.dads_room_light_mode
              data:
                option: Night
        - conditions:
            - condition: state
              entity_id: input_select.time_mode
              state: Late Night
            - condition: state
              entity_id: light.dads_room_pendant_light
              state: "on"
          sequence:
            - action: input_select.select_option
              target: 
                entity_id: input_select.dads_room_light_mode
              data:
                option: Late Night
        - conditions:
            - condition: state
              entity_id: input_select.time_mode
              state: Midnight
            - condition: state
              entity_id: light.dads_room_pendant_light
              state: "on"
          sequence:
            - action: input_select.select_option
              target: 
                entity_id: input_select.dads_room_light_mode
              data:
                option: Midnight
  trace:
    stored_traces: 100
- id: automation.select_dads_room_presence_mode
  alias: Select Dad’s Room Presence Mode
  triggers:
    - trigger: state
      entity_id: binary_sensor.dads_room_presence
      to: "on"
      for:
        minutes: 5
    - trigger: state
      entity_id: binary_sensor.dads_room_presence
      to: "off"
      for:
        minutes: 20
    - trigger: time_pattern
      minutes: "/5"
      seconds: 58
    - trigger: homeassistant
      event: start
  actions:
    - choose:
        - conditions:
            - condition: state
              entity_id: binary_sensor.dads_room_presence
              state: "on"
              for:
                minutes: 5
          sequence:
            - action: input_select.select_option
              target: 
                entity_id: input_select.dads_room_presence_mode
              data:
                option: Present
        - conditions:
            - condition: state
              entity_id: binary_sensor.dads_room_presence
              state: "off"
              for:
                minutes: 20
          sequence:
            - action: input_select.select_option
              target: 
                entity_id: input_select.dads_room_presence_mode
              data:
                option: Absent
  trace:
    stored_traces: 100

- id: automation.info_mamorail
  alias: "INFO: Mamorail"
  triggers:
    - trigger: state
      entity_id: sensor.mamorail
  conditions:
    - "{{ (as_timestamp(now()) - as_timestamp(state_attr('sensor.mamorail', 'Date'))) < 180 }}"
  actions:
    - delay:
        seconds: 5
    - variables:
        charge: ""
        particle: ""
    - if:
        - condition: numeric_state
          entity_id: sensor.mamorail_balance
          below: 1000
      then:
        - variables:
            charge: "ã€è¦ãƒãƒ£ãƒ¼ã‚¸ã€‘"
    - if:
        - condition: state
          entity_id: sensor.mamorail_action
          state: "å…¥å ´"
      then:
        - variables:
            particle: "ã«"
      else:
        - variables:
            particle: "ã‚’"
    - action: notify.all_devices
      data:
        title: "ðŸˆ INFO"
        message: "{{ charge }}{{ states('sensor.mamorail_station') }}{{ particle }}{{ states('sensor.mamorail_time') }}ã«{{ states('sensor.mamorail_action') }}ã—ã¾ã—ãŸã€‚æ®‹é«˜: {{ states('sensor.mamorail_balance') }}å††"
        data:
          push:
            interruption-level: time-sensitive
          url: "/lovelace/others"
- id: automation.info_mll
  alias: "INFO: MLL"
  triggers:
    - trigger: state
      entity_id: sensor.mll
  conditions:
    - "{{ (as_timestamp(now()) - as_timestamp(state_attr('sensor.mll', 'Date'))) < 180 }}"
  actions:
    - delay:
        seconds: 5
    - variables:
        particle: ""
    - if:
        - condition: state
          entity_id: sensor.mll_action
          state: "å…¥å®¤"
      then:
        - variables:
            particle: "ã«"
      else:
        - variables:
            particle: "ã‚’"
    - action: notify.all_devices
      data:
        title: "ðŸˆ INFO"
        message: "MLL{{ particle }}{{ states('sensor.mll_time') }}ã«{{ states('sensor.mll_action') }}ã—ã¾ã—ãŸ"
        data:
          push:
            interruption-level: time-sensitive
          url: "/lovelace/others"
